# European Community

je_hpx_eu_community = {
	icon = "gfx/interface/icons/timed_modifier_icons/EU.dds"

	group = je_group_internal_affairs
	scripted_button = convince_EU_button_key

	is_shown_when_inactive = {
		c:GBR = root
	}

	possible = {
		always = yes
	}

	weight = 200


	immediate = {
		set_global_variable = {
			name = EC_MEMBERS
			value = 1
		}
	}

	complete = {
		global_var:EC_MEMBERS >= 8
	}

	on_complete = {
		trigger_event = {
			id = hpx_EU_event.1
			days = 0
		}
	}

	current_value = {
		value = global_var:EC_MEMBERS
	}

	goal_add_value = {
		value = 7
	}
	should_be_pinned_by_default = yes
	progressbar = yes
}

je_hpx_anglo_french_influence = {
	icon = "gfx/interface/icons/timed_modifier_icons/GBR.dds"

	group = je_group_internal_affairs

	timeout = 7300

	immediate = {
		set_variable = { name = anglo_progress value = 100 }
		set_variable = { name = french_progress value = 100 }
    }

	weight = 150

	fail = {
		custom_tooltip = {
			text = anglofrench_progress_tt
			OR = {
				var:anglo_progress >= 200
				var:french_progress >= 200
			}
		}
	}

	on_monthly_pulse = {
		effect = {
			anglo_french_effects = yes
		}
		random_events = {
			30 = 0
			10 = hpx_GBR_event.2
			10 = hpx_GBR_event.3
			10 = hpx_GBR_event.4
		}
	}

	on_fail = {
		custom_tooltip = {
			text = anglofrench_collapse_tt
			every_country = {
				trigger_event = hpx_GBR_event.1
			}
		}
		
		if = {
			limit = {var:anglo_progress >= 200}
			hpx_free_france = yes
		} else_if = {
			limit = {var:french_progress >= 200}
			hpx_free_britain = yes
		}
		remove_variable = var:anglo_progress
		remove_variable = var:french_progress
	}
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = anglo_french_influence_french
				trigger = {
					var:french_progress >= 125
				}
			}
			triggered_desc = {
				desc = anglo_french_influence_anglo
				trigger = {
					var:anglo_progress >= 125
				}
			}
			triggered_desc = {
				desc = anglo_french_influence_neutral
				trigger = {
					always = yes
				}
			}
		}
	}

	should_be_pinned_by_default = yes
	scripted_progress_bar = french_english_progress_bar
}