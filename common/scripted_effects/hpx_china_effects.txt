calculate_china_characters = {
    set_variable = { name = maoists value = 0 }
    set_variable = { name = reformists value = 0 }
    set_variable = { name = liberals value = 0 }
    root = {
        every_scope_character = {
            limit = {
                OR = {
                    has_ideology = ideology:ideology_ultramaoism
                    has_ideology = ideology:ideology_maoism
                }
            }
            owner = {
                change_variable = { name = maoists add = 1 }
            }
        }

        every_scope_character = {
            limit = { has_ideology = ideology:ideology_maoism_reformism}
            owner = {
                change_variable = { name = reformists add = 1 }
            }
        }

        every_scope_character = {
            limit = {
                OR = {
                    has_ideology = ideology:ideology_maoism_liberal
                    has_ideology = ideology:ideology_democratic_marxism
                }
            }
            owner = {
                change_variable = { name = liberals add = 1 }
            }
        }
    }
}

calculate_china_factions = {
    je:je_hpx_prc_transitional_chairman ?= {
        set_bar_progress = {
            value = owner.var:militar
            name = china_militar
        }
        set_bar_progress = {
            value = owner.var:civil
            name = china_civil
        }
        set_bar_progress = {
            value = owner.var:party
            name = china_party
        }
    }
}